<!DOCTYPE html> <html class=no-js lang=en> <head> <meta charset=utf-8> <meta content='IE=edge,chrome=1' http-equiv=X-UA-Compatible> <meta content='width=device-width, initial-scale=1.0' name=viewport> <title>How to Calculate Article Reading Time with a Custom Middleman Extension | Torspark</title> <meta content='Learn how to write your own extension for Middleman to estimate how long it will take to read a blog post.' name=description> <link href="/css/app.css" rel=stylesheet /> <script src="/js/modernizr.js"></script> </head> <body class='how-to-calculate-article-reading-time-with-a-custom-middleman-extension how-to-calculate-article-reading-time-with-a-custom-middleman-extension_index'> <header> <nav class=top-bar data-topbar='' role=navigation> <ul class=title-area> <li class=name> <h1><a href="/">Torspark</a></h1> </li> <li class='toggle-topbar menu-icon'> <a href='#'> <span>menu</span> </a> </li> </ul> <section class=top-bar-section> <ul class=right> <li class=divider></li> <li class=has-dropdown> <a href="/services/">Services</a> <ul class=dropdown> <li><a href="/services/#custom-software-development">Custom Software</a></li> <li><a href="/services/#split-test-for-roi">Split Testing</a></li> </ul> </li> <li><a href="/portfolio/">Portfolio</a></li> <li><a href="/about/">About</a></li> <li><a href="mailto:2kn4ol38?sqs_title=How+can+I+help+you...">Contact</a></li> </ul> </section> </nav> </header> <div class=yield> <div class=row> <main role=main> <div class='small-12 medium-8 columns'> <article itemscope='' itemtype='http://schema.org/Article'> <h1 itemprop=name>How to Calculate Article Reading Time with a Custom Middleman Extension</h1> <div class=byline> by <span itemprop=author>Chris Olds</span> &mdash; Get free updates of new articles <a href="/newsletter/">here</a> </div> <p>This is a quick how-to guide on implementing an estimated reading time feature for your <a href="//middlemanapp.com">Middleman</a> blog with a custom Middleman extension. </p> <h2>Write the custom extension</h2> <p>You can just drop the code below into the main directory for your Middleman project. Mine is under <code>torspark.com/reading_time.rb</code>. Note that this is above the <code>/source</code> directory where most of your work will go in a Middleman project. You could also put it in a top level <code>/extensions</code> directory alongside the <code>/source</code> &amp; <code>/build</code> directories if you plan to write a lot of custom extensions. I don&rsquo;t have a need for this yet, so I just left it as an individual file.</p> <div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class=code><pre><span class="c1"># Outputs the reading time</span>
<span class="c1"># ex: Read this in "about 3 minutes"</span>

<span class="k">class</span> <span class="nc">ReadingTime</span> <span class="o">&lt;</span> <span class="no">Middleman</span><span class="o">::</span><span class="no">Extension</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">options_hash</span><span class="o">=</span><span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="k">super</span>
  <span class="k">end</span>

  <span class="n">helpers</span> <span class="k">do</span>
    <span class="k">def</span> <span class="nf">reading_time</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
      <span class="n">words_per_minute</span> <span class="o">=</span> <span class="mi">180</span>

      <span class="n">words</span> <span class="o">=</span> <span class="n">input</span><span class="p">.</span><span class="nf">split</span><span class="p">.</span><span class="nf">size</span>
      <span class="n">minutes</span> <span class="o">=</span> <span class="p">(</span><span class="n">words</span><span class="sr">/</span>/<span class="sr">words_per_minute).floor
      minutes_label = minutes === 1 ? ' minute' : ' minutes'
      minutes &gt; 0 ? "about </span><span class="si">#{</span><span class="n">minutes</span><span class="si">}</span><span class="sr"> </span><span class="si">#{</span><span class="n">minutes_label</span><span class="si">}</span><span class="sr">" : 'less than 1 minute'
    end
  end
end

::Middleman::Extensions.register(:reading_time, ReadingTime)
</span></pre></td></tr></tbody></table> </div> <p>You can easily customize line #11 to match the average reading speed for your readers. <a href="https://en.wikipedia.org/wiki/Words_per_minute">180 words per minute</a> is a conservative estimate for proofreading on a monitor. The average adult can read between 250 to 300 words per minute. Most of my articles are at least a little technical, so I decided to stick with 180 wpm.</p> <p>Lines #13&ndash;16 calculate the total number of words in the article, and then pluralize the label if necessary.</p> <p>The last line registers the extension so you can activate it in the <code>config.rb</code> file, like the code below.</p> <h2>Activate &amp; use your extension</h2> <div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2</pre></td><td class=code><pre><span class="nb">require</span> <span class="s1">'reading_time'</span>
<span class="n">activate</span> <span class="p">:</span><span class="n">reading_time</span>
</pre></td></tr></tbody></table> </div> <p>Next, we just need to use the helper in our layout. The estimated reading times you can see on <a title="Build Better Software, Faster" href="//torspark.com">Torspark&rsquo;s home page</a> and in the upper right of this page (assuming I haven&rsquo;t redesigned things&hellip;) are generated with the code below.</p> <div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2
3
4
5
6
7</pre></td><td class=code><pre><span class="c1"># links on source/index.html.haml:</span>
<span class="o">=</span> <span class="n">link_to</span> <span class="s2">"Read this article in </span><span class="si">#{</span><span class="n">reading_time</span> <span class="n">article</span><span class="p">.</span><span class="nf">body</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">article</span>

<span class="c1"># Estimated reading time in source/layouts/article.haml:</span>
<span class="o">%</span><span class="nb">p</span>
  <span class="no">Read</span> <span class="n">this</span> <span class="n">article</span> <span class="k">in</span>
  <span class="o">=</span> <span class="n">reading_time</span> <span class="n">current_article</span><span class="p">.</span><span class="nf">body</span>
</pre></td></tr></tbody></table> </div> <h2>Alternative</h2> <p>For something this simple, you could just drop lines #10&ndash;17 from the first code block above into the helper section of your Middleman <code>config.rb</code> file. I went ahead and built out the full extension, because I&rsquo;m planning to flesh it out a little more. The separate file also makes things a little cleaner to manage.</p> <h2>Feedback? Questions?</h2> <p>That&rsquo;s all there is to writing and using your own custom extension for Middleman. I hope it helps you customize your site. I&rsquo;d love to hear about the custom extensions you use. <a href="mailto:2kn4ol38">Drop me a line</a>.</p> <h3>Should I make a gem for you?</h3> <p>Also, I&rsquo;d consider building this out a little more and making a gem if you&rsquo;re interested. <a href="mailto:2kn4ol38">Let me know</a>.</p> </article> <div class='panel callout'> <div class=row> <div class='small-12 medium-8 columns'> <h5><a href="/newsletter/">Subscribe to the Newsletter</a></h5> <p> If you like what you see, you can receive more exclusive content in the newsletter. I'll send you updates once or twice a month. No spam, I promise. </p> </div> <div class='small-12 medium-4 columns'> <h5>Sign Up!</h5> <a class='button radius' href='/newsletter/'>Subscribe</a> </div> </div> </div> <div class=row> <div class='small-6 columns'> <p><a href="/benefits-of-weekly-billing-for-clients/">&larr; Previous Article<br>Benefits of Weekly Billing for Clients</a></p> </div> <div class='small-6 columns'> </div> </div> </div> </main> <aside class='small-12 medium-4 columns'> <div class='panel hide-for-small'> <p> Read this article in about 3 minutes </p> </div> <div class='panel callout'> <h5>Work Schedule</h5> <p> I have some availability opening up next month. If you're interested in working with me, check out what <a href="/services/">services I have to offer</a> and <a href="mailto:2kn4ol38?sqs_title=How+can+I+help+you...">send me a message</a>. </p> </div> <div class=panel> <h5>Recent Articles</h5> <ul class=side-nav> <li> <a href="/how-to-calculate-article-reading-time-with-a-custom-middleman-extension/">How to Calculate Article Reading Time with a Custom Middleman Extension</a> </li> <li> <a href="/benefits-of-weekly-billing-for-clients/">Benefits of Weekly Billing for Clients</a> </li> <li> <a href="/advantages-of-weekly-billing-for-developers/">Advantages of Weekly Billing for Developers</a> </li> <li> <a href="/static-site-generators-jekyll-vs-octopress-vs-middleman/">Static Site Generators: Jekyll vs Octopress vs Middleman</a> </li> </ul> </div> </aside> </div> </div> <footer> <div class=row> <div class='small-12 columns'> <p class=text-right>Crafted by <a title="Custom Software Development &amp; Consultancy" href="/">Torspark</a></p> </div> </div> </footer> <script src="/js/all.js"></script> <script src='https://squaresend.com/squaresend.js'></script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-29086369-1', 'auto');
  ga('send', 'pageview');
</script> </body> </html>