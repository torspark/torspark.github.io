<!DOCTYPE html> <html class=no-js lang=en> <head> <meta charset=utf-8> <meta content='IE=edge,chrome=1' http-equiv=X-UA-Compatible> <meta content='width=device-width, initial-scale=1.0' name=viewport> <script src='//cdn.optimizely.com/js/2410440098.js'>// Keep near the top to avoid page flashing</script> <title>How to Calculate Article Reading Time with a Custom Middleman Extension | Torspark</title> <meta content='Learn how to write your own extension for Middleman to estimate how long it will take to read a blog post.' name=description> <link href="/css/app.css" rel=stylesheet /> <script src="/js/modernizr.js"></script> <meta content='How to Calculate Article Reading Time with a Custom Middleman Extension | Torspark' property='og:title'> <meta content=article property='og:type'> <meta content='http://torspark.com/how-to-calculate-article-reading-time-with-a-custom-middleman-extension/' property='og:url'> <meta content='http://torspark.com/img/library.jpg' property='og:image'> <meta content='Learn how to write your own extension for Middleman to estimate how long it will take to read a blog post.' property='og:description'> <meta content=en_US property='og:locale'> <meta content=Torspark property='og:site_name'> <meta content='Chris Olds' property='article:author'> <meta content='middleman extension' property='article:tag'> <meta content='calculate reading time' property='article:tag'> <meta content='customize middleman' property='article:tag'> <link href='/apple-touch-icon-57x57.png' rel=apple-touch-icon sizes=57x57> <link href='/apple-touch-icon-114x114.png' rel=apple-touch-icon sizes=114x114> <link href='/apple-touch-icon-72x72.png' rel=apple-touch-icon sizes=72x72> <link href='/apple-touch-icon-60x60.png' rel=apple-touch-icon sizes=60x60> <link href='/apple-touch-icon-120x120.png' rel=apple-touch-icon sizes=120x120> <link href='/apple-touch-icon-76x76.png' rel=apple-touch-icon sizes=76x76> <link href='/favicon-96x96.png' rel=icon sizes=96x96 type='image/png'> <link href='/favicon-16x16.png' rel=icon sizes=16x16 type='image/png'> <link href='/favicon-32x32.png' rel=icon sizes=32x32 type='image/png'> <meta content='#333333' name=msapplication-TileColor> <script>
  window.heap=window.heap||[],heap.load=function(t,e){window.heap.appid=t,window.heap.config=e;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.heapanalytics.com/js/heap.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(t){return function(){heap.push([t].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
  heap.load("4062029142");
</script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-29086369-1', 'auto');
  ga('send', 'pageview');
</script> <script>
  window.__insp = window.__insp || [];
  __insp.push(['wid', 1700162217]);
  (function() {
    function __ldinsp(){var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); }
    if (window.attachEvent){
      window.attachEvent('onload', __ldinsp);
    }else{
      window.addEventListener('load', __ldinsp, false);
    }
  })();
</script> </head> <body class='how-to-calculate-article-reading-time-with-a-custom-middleman-extension how-to-calculate-article-reading-time-with-a-custom-middleman-extension_index'> <header> <div class=sticky> <nav class=top-bar data-topbar='' role=navigation> <ul class=title-area> <li class=name> <h1><a href="/"><i class="fa fa-bolt"></i> Torspark</a></h1> </li> <li class='toggle-topbar menu-icon'> <a href='#'> <span>menu</span> </a> </li> </ul> <section class=top-bar-section> <ul class=right> <li><a href="/articles/"><i class="fa fa-newspaper-o fa-fw"></i> Articles</a></li> <li class=has-dropdown> <a href="/solutions/"><i class="fa fa-shield fa-fw"></i> Solutions</a> <ul class=dropdown> <li><a href="/catalyst/"><i class="fa fa-line-chart fa-fw"></i> A/B Testing</a></li> <li><a href="/cro-critique/"><i class="fa fa-desktop fa-fw"></i> CRO Critique</a></li> <li><a href="/workshops/"><i class="fa fa-wrench fa-fw"></i> Workshops</a></li> <li><a href="/consulting/"><i class="fa fa-briefcase fa-fw"></i> Consulting</a></li> </ul> </li> <li><a href="/about/"><i class="fa fa-coffee fa-fw"></i> About</a></li> <li><a href="mailto:3wojkp7a?sqs_title=How+can+we+help+you..."><i class="fa fa-comment fa-fw"></i> Contact</a></li> </ul> </section> </nav> </div> </header> <div class=yield> <div class=row> <main role=main> <div class='medium-8 columns'> <article itemscope='' itemtype='http://schema.org/Article'> <h1 itemprop=headline>How to Calculate Article Reading Time with a Custom Middleman Extension</h1> <div class=byline> by <span itemprop=author>Chris Olds</span> &mdash; Get free updates of new articles <a href="/newsletter/">here</a> </div> <img class=article-img data-interchange="[/img/library.jpg, (default)]"/><noscript><img src="/img/library.jpg"/></noscript> <meta content='http://torspark.com/img/library.jpg' itemprop=image> <div class=article-body itemprop=articleBody><p>This is a quick how-to guide on implementing an estimated reading time feature for your <a href="//middlemanapp.com">Middleman</a> blog with a custom Middleman extension. </p> <h2>Write the custom extension</h2> <p>You can just drop the code below into the main directory for your Middleman project. Mine is under <code>torspark.com/reading_time.rb</code>. Note that this is above the <code>/source</code> directory where most of your work will go in a Middleman project. You could also put it in a top level <code>/extensions</code> directory alongside the <code>/source</code> &amp; <code>/build</code> directories if you plan to write a lot of custom extensions. I don&rsquo;t have a need for this yet, so I just left it as an individual file.</p> <div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class=code><pre><span class="c1"># Outputs the reading time</span>
<span class="c1"># ex: Read this in "about 3 minutes"</span>

<span class="k">class</span> <span class="nc">ReadingTime</span> <span class="o">&lt;</span> <span class="no">Middleman</span><span class="o">::</span><span class="no">Extension</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">options_hash</span><span class="o">=</span><span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="k">super</span>
  <span class="k">end</span>

  <span class="n">helpers</span> <span class="k">do</span>
    <span class="k">def</span> <span class="nf">reading_time</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
      <span class="n">words_per_minute</span> <span class="o">=</span> <span class="mi">180</span>

      <span class="n">words</span> <span class="o">=</span> <span class="n">input</span><span class="p">.</span><span class="nf">split</span><span class="p">.</span><span class="nf">size</span>
      <span class="n">minutes</span> <span class="o">=</span> <span class="p">(</span><span class="n">words</span><span class="sr">/</span>/<span class="sr">words_per_minute).floor
      minutes_label = minutes === 1 ? ' minute' : ' minutes'
      minutes &gt; 0 ? "about </span><span class="si">#{</span><span class="n">minutes</span><span class="si">}</span><span class="sr"> </span><span class="si">#{</span><span class="n">minutes_label</span><span class="si">}</span><span class="sr">" : 'less than 1 minute'
    end
  end
end

::Middleman::Extensions.register(:reading_time, ReadingTime)
</span></pre></td></tr></tbody></table> </div> <p>You can easily customize line #11 to match the average reading speed for your readers. <a href="https://en.wikipedia.org/wiki/Words_per_minute">180 words per minute</a> is a conservative estimate for proofreading on a monitor. The average adult can read between 250 to 300 words per minute. Most of my articles are at least a little technical, so I decided to stick with 180 wpm.</p> <p>Lines #13&ndash;16 calculate the total number of words in the article, and then pluralize the label if necessary.</p> <p>The last line registers the extension so you can activate it in the <code>config.rb</code> file, like the code below.</p> <h2>Activate &amp; use your extension</h2> <div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2</pre></td><td class=code><pre><span class="nb">require</span> <span class="s1">'reading_time'</span>
<span class="n">activate</span> <span class="p">:</span><span class="n">reading_time</span>
</pre></td></tr></tbody></table> </div> <p>Next, we just need to use the helper in our layout. The estimated reading times you can see on <a title="Build Better Software, Faster" href="//torspark.com">Torspark&rsquo;s home page</a> and in the upper right of this page (assuming I haven&rsquo;t redesigned things&hellip;) are generated with the code below.</p> <div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2
3
4
5
6
7</pre></td><td class=code><pre><span class="c1"># links on source/index.html.haml:</span>
<span class="o">=</span> <span class="n">link_to</span> <span class="s2">"Read this article in </span><span class="si">#{</span><span class="n">reading_time</span> <span class="n">article</span><span class="p">.</span><span class="nf">body</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">article</span>

<span class="c1"># Estimated reading time in source/layouts/article.haml:</span>
<span class="o">%</span><span class="nb">p</span>
  <span class="no">Read</span> <span class="n">this</span> <span class="n">article</span> <span class="k">in</span>
  <span class="o">=</span> <span class="n">reading_time</span> <span class="n">current_article</span><span class="p">.</span><span class="nf">body</span>
</pre></td></tr></tbody></table> </div> <h2>Alternative</h2> <p>For something this simple, you could just drop lines #10&ndash;17 from the first code block above into the helper section of your Middleman <code>config.rb</code> file. I went ahead and built out the full extension, because I&rsquo;m planning to flesh it out a little more. The separate file also makes things a little cleaner to manage.</p> <h2>Feedback? Questions?</h2> <p>That&rsquo;s all there is to writing and using your own custom extension for Middleman. I hope it helps you customize your site. I&rsquo;d love to hear about the custom extensions you use. <a href="mailto:3wojkp7a">Drop me a line</a>.</p> <h3>Should I make a gem for you?</h3> <p>Also, I&rsquo;d consider building this out a little more and making a gem if you&rsquo;re interested. <a href="mailto:3wojkp7a">Let me know</a>.</p> </div> <div class=hidden> <p> Word Count: <span itemprop=wordCount>619</span> </p> <p> Keywords: <span itemprop=keywords>middleman extension,calculate reading time,customize middleman</span> </p> </div> <time datetime='2014-10-20T21:58:00-05:00' itemprop=dateCreated></time> <time datetime='2014-10-20T21:58:00-05:00' itemprop=datePublished></time> <time datetime='2015-01-22T23:09:10-06:00' itemprop=dateModified></time> </article> <div class='panel callout'> <div class=row> <div class='medium-8 columns'> <h3><a href="mailto:3wojkp7a?sqs_title=Drop+us+a+line">Want to Know More?</a></h3> <p> If you have any questions or comments, feel free to contact me. I love talking about this stuff, and I make sure to answer every email. </p> </div> <div class='medium-4 columns'> <h3>Hey There!</h3> <a class="button radius" href="mailto:3wojkp7a?sqs_title=Drop+us+a+line"><i class="fa fa-comment"></i> Say Hi!</a> </div> </div> </div> <div class=row> <div class='small-6 columns'> <a class=th href="/benefits-of-weekly-billing-for-clients/"><img src="/img/dandelions_t.jpg"/></a> <p><a href="/benefits-of-weekly-billing-for-clients/">&larr; Previous Article<br>Benefits of Weekly Billing for Clients</a></p> </div> <div class='small-6 columns'> <div class=text-right><a class=th href="/how-to-update-fork-from-original-github-repo/"><img src="/img/three-forks_t.jpg"/></a></div> <p class=text-right><a href="/how-to-update-fork-from-original-github-repo/">Next Article &rarr;<br>How to Update Fork from Original Github Repo</a></p> </div> </div> </div> </main> <aside class='medium-4 columns'> <div class='label radius secondary hide-for-small'> Read this article in about 3 minutes </div> <div class='panel callout'> <h3>Let's <a href="/catalyst/">Boost Your Conversions</a>!</h3> <p> We currently have <b><a href="/catalyst/">2 slots available.</a></b> </p> <p> We only work with a handful of clients each month to ensure we're always delivering value. </p> <p> <a href="/solutions/">Click here</a> to see what other solutions we offer to improve your sales funnel. </p> </div> <h3 class=underline>Recent Articles</h3> <ul class=side-nav> <li> <a href="/google-announcement-mobile-friendly/">Google Announcement: Mobile-Friendly Websites Receive Better Search Rankings</a> </li> <li> <a href="/hierarchy-of-optimization/">The Hierarchy of Optimization for Websites: The Building Blocks of Conversion Rate Optimization</a> </li> <li> <a href="/bandit-testing-when-should-you-use-multi-armed-bandit-testing/">Bandit Testing: When Should You Use Multi-Armed Bandit Testing</a> </li> <li> <a href="/why-carousels-destroy-your-conversion-rate/">Why Carousels Destroy your Conversion Rate</a> </li> <li> <a href="/ab-testing-crash-course-5-questions-and-answers-you-need-to-know/">A/B Testing Crash Course: 5 Questions (and Answers) You Need to Know</a> </li> </ul> <div class=panel> <h3>Like it? &rarr; Share it!</h3> <blockquote> <em>"How to Calculate Article Reading Time with a Custom Middleman Extension"</em> </blockquote> <ul class='stack button-group'> <li><a class="js-popup button small radius" title="Share this on Twitter" href="//twitter.com/intent/tweet?text=How+to+Calculate+Article+Reading+Time+with+a+Custom+Middleman+Extension&amp;amp;url=http%3A%2F%2Ftorspark.com%2Fhow-to-calculate-article-reading-time-with-a-custom-middleman-extension%2F&amp;amp;via=torspark"><i class="fa fa-twitter"></i> Tweet it</a></li> <li><a class="js-popup button small radius" title="Share this on Facebook" href="//www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Ftorspark.com%2Fhow-to-calculate-article-reading-time-with-a-custom-middleman-extension%2F"><i class="fa fa-facebook-square"></i> Share it</a></li> </ul> </div> </aside> </div> </div> <footer> <div class=row> <div class='medium-9 columns'> <p class=text-left> Copyright &copy; 2011&ndash;2015 Torspark llc. All rights reserved. </p> </div> <div class='medium-3 columns'> <p class=text-right> Crafted by <a title="Boutique CRO Consultancy" href="/">Torspark</a> </p> </div> </div> </footer> <script src="/js/all.js"></script> <script src='https://squaresend.com/squaresend.js'></script> </body> </html>